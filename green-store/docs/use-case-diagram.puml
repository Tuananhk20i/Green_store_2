@startuml
left to right direction
skinparam usecase {
  BackgroundColor<<Customer>> #EFEFEF
}

actor Guest as "Guest (Unauthenticated)"
actor Customer as "Customer (Authenticated)"
actor Admin as "Admin"

usecase "Browse Products" as UC_BROWSE
usecase "Search Products" as UC_SEARCH
usecase "View Product Details" as UC_VIEW
usecase "Add to Cart" as UC_ADD
usecase "View Cart" as UC_CART
usecase "Checkout" as UC_CHECKOUT
usecase "Manage Account" as UC_ACCOUNT
usecase "Login / Register" as UC_AUTH
usecase "Chat / Contact" as UC_CHAT

usecase "Manage Products" as UC_MGMT_PRODUCTS
usecase "Manage Orders" as UC_MGMT_ORDERS
usecase "View Revenue / Reports" as UC_REPORTS

' Actors -> Use cases
Guest --> UC_BROWSE
Guest --> UC_SEARCH
Guest --> UC_VIEW
Guest --> UC_AUTH
Guest --> UC_CHAT

Customer --> UC_BROWSE
Customer --> UC_SEARCH
Customer --> UC_VIEW
Customer --> UC_ADD
Customer --> UC_CART
Customer --> UC_CHECKOUT
Customer --> UC_ACCOUNT
Customer --> UC_CHAT
Customer --> UC_AUTH

Admin --> UC_MGMT_PRODUCTS
Admin --> UC_MGMT_ORDERS
Admin --> UC_REPORTS
Admin --> UC_AUTH

' Use case relations
UC_VIEW .> UC_ADD : include
UC_ADD .> UC_CART : include
UC_CART .> UC_CHECKOUT : include

' Notes and important alternate flow
note right of UC_ADD
If a Guest triggers "Add to Cart":
  - the app redirects to /login (or shows auth modal)
  - after successful login, user may be returned to previous page
end note

note left of UC_CHECKOUT
Checkout requires authenticated Customer and a non-empty cart
end note

@enduml
